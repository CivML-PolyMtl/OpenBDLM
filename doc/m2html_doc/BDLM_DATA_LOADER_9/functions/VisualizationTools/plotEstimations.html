<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plotEstimations</title>
  <meta name="keywords" content="plotEstimations">
  <meta name="description" content="PLOTESTIMATIONS Plot hidden states results">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">BDLM_DATA_LOADER_9</a> &gt; <a href="#">functions</a> &gt; <a href="index.html">VisualizationTools</a> &gt; plotEstimations.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for BDLM_DATA_LOADER_9/functions/VisualizationTools&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>plotEstimations
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>PLOTESTIMATIONS Plot hidden states results</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function plotEstimations(data, model, estimation, misc, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PLOTESTIMATIONS Plot hidden states results

   SYNOPSIS:
     PLOTESTIMATIONS(data, model, estimation, misc, varargin)

   INPUT:
      data             - structure (required)
                         see documentation for details about the fields of
                         data

      model            - structure (required)
                         see documentation for details about the fields of
                         model

      estimation       - structure (required)
                         see documentation for details about the fields of
                         estimation

      misc             - structure (required)
                         see documentation for details about the fields of
                         misc

      isExportPDF      - logical (optional)
                         if isExportPDF = true, export the figure in PDF
                         format and build a single PDF file with all plots
                         default: false

      isExportPNG      - logical (optional)
                         if isExportPNG = true , export the figure in PNG
                         format
                         default: false

      isExportTEX      - logical (optional)
                         if isExportTEX = true , export the figure in TEX
                         format
                         default: false

      FilePath         - character (optional)
                         directory where to save the file
                         default: '.'  (current folder)

   OUTPUT:
      Plot figures on screen and export figures in the location given by
      FilePath

   DESCRIPTION:
      PLOTESTIMATIONS plots hidden states results.
      PLOTESTIMATIONS plots true hidden states values when they are known,
      that is, in case of data simulation.
      PLOTESTIMATIONS also plots predicted data and observations.

   EXAMPLES:
      PLOTESTIMATIONS(data, model, estimation, misc, 'FilePath', 'figures')
      PLOTESTIMATIONS(data, model, estimation, misc, 'FilePath', 'figures', 'isExportPDF', true)
      PLOTESTIMATIONS(data, model, estimation, misc, 'isExportPDF', true, 'isExportPNG', false, 'isExportTEX', true)

   EXTERNAL FUNCTIONS CALLED:
      plotPredictedData, plotHiddenStates, plotModelProbability,
      plotStaticKernelRegression, plotWaterfallSKDKRegression

   See also <a href="exportPlot.html" class="code" title="function exportPlot(FigureName, varargin)">EXPORTPLOT</a>, <a href="plotEstimations.html" class="code" title="function plotEstimations(data, model, estimation, misc, varargin)">PLOTESTIMATIONS</a>, <a href="plotPredictedData.html" class="code" title="function [FigureNames] = plotPredictedData(data, model, estimation, misc, varargin)">PLOTPREDICTEDDATA</a>,
   <a href="plotHiddenStates.html" class="code" title="function [FigureNames] = plotHiddenStates(data, model, estimation, misc, varargin)">PLOTHIDDENSTATES</a>, <a href="plotModelProbability.html" class="code" title="function [FigureNames] = plotModelProbability(data, model, estimation, misc, varargin)">PLOTMODELPROBABILITY</a>, <a href="plotDynamicRegression.html" class="code" title="function [FigureNames] = plotDynamicRegression(data, model, estimation, misc, varargin)">PLOTDYNAMICREGRESSION</a>,
   <a href="plotStaticKernelRegression.html" class="code" title="function [FigureNames] = plotStaticKernelRegression(data, model, estimation, misc, varargin)">PLOTSTATICKERNELREGRESSION</a>, <a href="plotWaterfallSKDKRegression.html" class="code" title="function [FigureNames] = plotWaterfallSKDKRegression(data, model, estimation, misc, varargin)">PLOTWATERFALLSKDKREGRESSION</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../BDLM_DATA_LOADER_9/functions/Others/incrementFilename.html" class="code" title="function [filename]=incrementFilename(ReferenceName, FilePath, varargin)">incrementFilename</a>	INCREMENTFILENAME Increment filename to prevent overwriting</li><li><a href="../../../BDLM_DATA_LOADER_9/functions/Others/testFileExistence.html" class="code" title="function [isFileExist]=testFileExistence(FileName, FileType)">testFileExistence</a>	TESTFILEEXISTENCE Test existence of a file</li><li><a href="plotDynamicRegression.html" class="code" title="function [FigureNames] = plotDynamicRegression(data, model, estimation, misc, varargin)">plotDynamicRegression</a>	PLOTDYNAMICREGRESSION Plot dynamic regression time series pattern</li><li><a href="plotHiddenStates.html" class="code" title="function [FigureNames] = plotHiddenStates(data, model, estimation, misc, varargin)">plotHiddenStates</a>	PLOTHIDDENSTATES Plot true and estimated hidden states</li><li><a href="plotModelProbability.html" class="code" title="function [FigureNames] = plotModelProbability(data, model, estimation, misc, varargin)">plotModelProbability</a>	PLOTMODELPROBABILITY Plot true and estimated model probability</li><li><a href="plotPredictedData.html" class="code" title="function [FigureNames] = plotPredictedData(data, model, estimation, misc, varargin)">plotPredictedData</a>	PLOTPREDICTEDDATA Plot observed and predicted data</li><li><a href="plotStaticKernelRegression.html" class="code" title="function [FigureNames] = plotStaticKernelRegression(data, model, estimation, misc, varargin)">plotStaticKernelRegression</a>	PLOTSTATICKERNELREGRESSION Plot static kernel regression patterns</li><li><a href="plotWaterfallSKDKRegression.html" class="code" title="function [FigureNames] = plotWaterfallSKDKRegression(data, model, estimation, misc, varargin)">plotWaterfallSKDKRegression</a>	PLOTWATERFALLSKDKREGRESSION Waterfall plot for kernel regression component</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../BDLM_DATA_LOADER_9/BDLM.html" class="code" title="">BDLM</a>	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function plotEstimations(data, model, estimation, misc, varargin)</a>
0002 <span class="comment">%PLOTESTIMATIONS Plot hidden states results</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   SYNOPSIS:</span>
0005 <span class="comment">%     PLOTESTIMATIONS(data, model, estimation, misc, varargin)</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%   INPUT:</span>
0008 <span class="comment">%      data             - structure (required)</span>
0009 <span class="comment">%                         see documentation for details about the fields of</span>
0010 <span class="comment">%                         data</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%      model            - structure (required)</span>
0013 <span class="comment">%                         see documentation for details about the fields of</span>
0014 <span class="comment">%                         model</span>
0015 <span class="comment">%</span>
0016 <span class="comment">%      estimation       - structure (required)</span>
0017 <span class="comment">%                         see documentation for details about the fields of</span>
0018 <span class="comment">%                         estimation</span>
0019 <span class="comment">%</span>
0020 <span class="comment">%      misc             - structure (required)</span>
0021 <span class="comment">%                         see documentation for details about the fields of</span>
0022 <span class="comment">%                         misc</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%      isExportPDF      - logical (optional)</span>
0025 <span class="comment">%                         if isExportPDF = true, export the figure in PDF</span>
0026 <span class="comment">%                         format and build a single PDF file with all plots</span>
0027 <span class="comment">%                         default: false</span>
0028 <span class="comment">%</span>
0029 <span class="comment">%      isExportPNG      - logical (optional)</span>
0030 <span class="comment">%                         if isExportPNG = true , export the figure in PNG</span>
0031 <span class="comment">%                         format</span>
0032 <span class="comment">%                         default: false</span>
0033 <span class="comment">%</span>
0034 <span class="comment">%      isExportTEX      - logical (optional)</span>
0035 <span class="comment">%                         if isExportTEX = true , export the figure in TEX</span>
0036 <span class="comment">%                         format</span>
0037 <span class="comment">%                         default: false</span>
0038 <span class="comment">%</span>
0039 <span class="comment">%      FilePath         - character (optional)</span>
0040 <span class="comment">%                         directory where to save the file</span>
0041 <span class="comment">%                         default: '.'  (current folder)</span>
0042 <span class="comment">%</span>
0043 <span class="comment">%   OUTPUT:</span>
0044 <span class="comment">%      Plot figures on screen and export figures in the location given by</span>
0045 <span class="comment">%      FilePath</span>
0046 <span class="comment">%</span>
0047 <span class="comment">%   DESCRIPTION:</span>
0048 <span class="comment">%      PLOTESTIMATIONS plots hidden states results.</span>
0049 <span class="comment">%      PLOTESTIMATIONS plots true hidden states values when they are known,</span>
0050 <span class="comment">%      that is, in case of data simulation.</span>
0051 <span class="comment">%      PLOTESTIMATIONS also plots predicted data and observations.</span>
0052 <span class="comment">%</span>
0053 <span class="comment">%   EXAMPLES:</span>
0054 <span class="comment">%      PLOTESTIMATIONS(data, model, estimation, misc, 'FilePath', 'figures')</span>
0055 <span class="comment">%      PLOTESTIMATIONS(data, model, estimation, misc, 'FilePath', 'figures', 'isExportPDF', true)</span>
0056 <span class="comment">%      PLOTESTIMATIONS(data, model, estimation, misc, 'isExportPDF', true, 'isExportPNG', false, 'isExportTEX', true)</span>
0057 <span class="comment">%</span>
0058 <span class="comment">%   EXTERNAL FUNCTIONS CALLED:</span>
0059 <span class="comment">%      plotPredictedData, plotHiddenStates, plotModelProbability,</span>
0060 <span class="comment">%      plotStaticKernelRegression, plotWaterfallSKDKRegression</span>
0061 <span class="comment">%</span>
0062 <span class="comment">%   See also EXPORTPLOT, PLOTESTIMATIONS, PLOTPREDICTEDDATA,</span>
0063 <span class="comment">%   PLOTHIDDENSTATES, PLOTMODELPROBABILITY, PLOTDYNAMICREGRESSION,</span>
0064 <span class="comment">%   PLOTSTATICKERNELREGRESSION, PLOTWATERFALLSKDKREGRESSION</span>
0065 
0066 <span class="comment">%   AUTHORS:</span>
0067 <span class="comment">%       Ianis Gaudot, Luong Ha Nguyen, James-A Goulet</span>
0068 <span class="comment">%</span>
0069 <span class="comment">%      Email: &lt;james.goulet@polymtl.ca&gt;</span>
0070 <span class="comment">%      Website: &lt;http://www.polymtl.ca/expertises/goulet-james-alexandre&gt;</span>
0071 <span class="comment">%</span>
0072 <span class="comment">%   MATLAB VERSION:</span>
0073 <span class="comment">%      Tested on 9.1.0.441655 (R2016b)</span>
0074 <span class="comment">%</span>
0075 <span class="comment">%   DATE CREATED:</span>
0076 <span class="comment">%       May 24, 2018</span>
0077 <span class="comment">%</span>
0078 <span class="comment">%   DATE LAST UPDATE:</span>
0079 <span class="comment">%       June 11, 2018</span>
0080 
0081 <span class="comment">%--------------------BEGIN CODE ----------------------</span>
0082 
0083 <span class="comment">%% Get arguments passed to the function and proceed to some verifications</span>
0084 p = inputParser;
0085 
0086 defaultFilePath = <span class="string">'.'</span>;
0087 defaultisExportPDF = false;
0088 defaultisExportPNG = true;
0089 defaultisExportTEX = false;
0090 
0091 validationFonction = @(x) ischar(x) &amp;&amp; <span class="keyword">...</span>
0092     ~isempty(x(~isspace(x)));
0093 
0094 addRequired(p,<span class="string">'data'</span>, @isstruct );
0095 addRequired(p,<span class="string">'model'</span>, @isstruct );
0096 addRequired(p,<span class="string">'estimation'</span>, @isstruct );
0097 addRequired(p,<span class="string">'misc'</span>, @isstruct );
0098 addParameter(p,<span class="string">'isExportPDF'</span>, defaultisExportPDF,  @islogical);
0099 addParameter(p,<span class="string">'isExportPNG'</span>, defaultisExportPNG,  @islogical);
0100 addParameter(p,<span class="string">'isExportTEX'</span>, defaultisExportTEX,  @islogical);
0101 addParameter(p, <span class="string">'FilePath'</span>, defaultFilePath, validationFonction)
0102 parse(p,data, model, estimation, misc, varargin{:});
0103 
0104 data=p.Results.data;
0105 model=p.Results.model;
0106 estimation=p.Results.estimation;
0107 misc=p.Results.misc;
0108 isExportPDF = p.Results.isExportPDF;
0109 isExportPNG = p.Results.isExportPNG;
0110 isExportTEX = p.Results.isExportTEX;
0111 FilePath=p.Results.FilePath;
0112 
0113 
0114 <span class="comment">%% Verification if there are data to plot, or not</span>
0115 <span class="keyword">if</span> ~isfield(estimation,<span class="string">'ref'</span>) &amp;&amp; ~isfield(estimation,<span class="string">'x'</span>)
0116     disp(<span class="string">'No plot to create...'</span>)
0117     <span class="keyword">return</span>
0118 <span class="keyword">end</span>
0119 
0120 <span class="comment">%% Remove space in filename</span>
0121 <span class="comment">%FilePath = FilePath(~isspace(FilePath));</span>
0122 
0123 <span class="comment">%% Create specified path if not existing</span>
0124 [isFileExist] = <a href="../../../BDLM_DATA_LOADER_9/functions/Others/testFileExistence.html" class="code" title="function [isFileExist]=testFileExistence(FileName, FileType)">testFileExistence</a>(FilePath, <span class="string">'dir'</span>);
0125 <span class="keyword">if</span> ~isFileExist
0126     <span class="comment">% create directory</span>
0127     mkdir(FilePath)
0128     <span class="comment">% set directory on path</span>
0129     addpath(FilePath)
0130 <span class="keyword">end</span>
0131 
0132 
0133 <span class="comment">%% Create subdirectory where to save the figures</span>
0134 
0135 <span class="keyword">if</span> isExportPNG || isExportPDF || isExportTEX
0136     
0137     fullname = fullfile(FilePath, misc.ProjectName);
0138     [isFileExist] = <a href="../../../BDLM_DATA_LOADER_9/functions/Others/testFileExistence.html" class="code" title="function [isFileExist]=testFileExistence(FileName, FileType)">testFileExistence</a>(fullname, <span class="string">'dir'</span>);
0139     
0140     <span class="keyword">if</span> isFileExist
0141         disp(<span class="string">' '</span>)
0142         fprintf(<span class="string">'Directory %s already exists. Overwrite ?\n'</span>, fullname)
0143         
0144         isYesNoCorrect = false;
0145         <span class="keyword">while</span> ~isYesNoCorrect
0146             choice = input(<span class="string">'     (y/n) &gt;&gt; '</span>,<span class="string">'s'</span>);
0147             <span class="keyword">if</span> isempty(choice)
0148                 disp(<span class="string">' '</span>)
0149                 disp(<span class="string">'     wrong input --&gt; please make a choice'</span>)
0150                 disp(<span class="string">' '</span>)
0151             <span class="keyword">elseif</span> strcmp(choice,<span class="string">'y'</span>) || strcmp(choice,<span class="string">'yes'</span>) ||  <span class="keyword">...</span>
0152                     strcmp(choice,<span class="string">'Y'</span>) || strcmp(choice,<span class="string">'Yes'</span>)  || <span class="keyword">...</span>
0153                     strcmp(choice,<span class="string">'YES'</span>)
0154                 
0155                 isYesNoCorrect =  true;
0156                 
0157             <span class="keyword">elseif</span> strcmp(choice,<span class="string">'n'</span>) || strcmp(choice,<span class="string">'no'</span>) ||  <span class="keyword">...</span>
0158                     strcmp(choice,<span class="string">'N'</span>) || strcmp(choice,<span class="string">'No'</span>)  || <span class="keyword">...</span>
0159                     strcmp(choice,<span class="string">'NO'</span>)
0160                 
0161                 [name] = <a href="../../../BDLM_DATA_LOADER_9/functions/Others/incrementFilename.html" class="code" title="function [filename]=incrementFilename(ReferenceName, FilePath, varargin)">incrementFilename</a>([misc.ProjectName, <span class="string">'_new'</span>], FilePath);
0162                 fullname=fullfile(FilePath, name);
0163                 
0164                 <span class="comment">% Create new directory</span>
0165                 mkdir(fullname)
0166                 addpath(fullname)
0167                 
0168                 isYesNoCorrect =  true;
0169                 
0170             <span class="keyword">else</span>
0171                 disp(<span class="string">' '</span>)
0172                 disp(<span class="string">'     wrong input'</span>)
0173                 disp(<span class="string">' '</span>)
0174             <span class="keyword">end</span>
0175             
0176         <span class="keyword">end</span>
0177     <span class="keyword">else</span>
0178         
0179         <span class="comment">% Create new directory</span>
0180         mkdir(fullname)
0181         addpath(fullname)
0182         
0183     <span class="keyword">end</span>
0184     
0185 <span class="keyword">else</span>
0186     
0187     fullname = FilePath;
0188     
0189 <span class="keyword">end</span>
0190 
0191 <span class="comment">%% Verification if there are data to plot, or not</span>
0192 <span class="keyword">if</span> ~isfield(estimation,<span class="string">'ref'</span>) &amp;&amp; ~isfield(estimation,<span class="string">'x'</span>)
0193     disp(<span class="string">'No plot to create...'</span>)
0194     <span class="keyword">return</span>
0195 <span class="keyword">end</span>
0196 
0197 <span class="comment">%% Define parameters for plot appareance</span>
0198 <span class="comment">% Plot secondary close-up figure</span>
0199 <span class="keyword">if</span> ~isfield(misc,<span class="string">'isSecondaryPlots'</span>)
0200     misc.isSecondaryPlots=true;
0201 <span class="keyword">end</span>
0202 
0203 <span class="comment">% Select linewidth</span>
0204 <span class="keyword">if</span> ~isfield(misc,<span class="string">'linewidth'</span>)
0205     misc.linewidth=1;
0206 <span class="keyword">end</span>
0207 
0208 <span class="comment">% Select subsamples in order to reduce the number of points</span>
0209 <span class="keyword">if</span> ~isfield(misc,<span class="string">'subsample'</span>)
0210     misc.subsample=1;
0211 <span class="keyword">end</span>
0212 
0213 <span class="comment">% number of x-axis division</span>
0214 <span class="keyword">if</span> ~isfield(misc,<span class="string">'ndivx'</span>)
0215     misc.ndivx=5;
0216 <span class="keyword">end</span>
0217 
0218 <span class="comment">% number of y-axis division</span>
0219 <span class="keyword">if</span> ~isfield(misc,<span class="string">'ndivy'</span>)
0220     misc.ndivy=3;
0221 <span class="keyword">end</span>
0222 
0223 <span class="comment">% Initialize a cell array that records the names of all the figures</span>
0224 FigureNames_full = {};
0225 
0226 <span class="comment">%% Plot predicted data</span>
0227 
0228 [FigureNames] = <span class="keyword">...</span>
0229     <a href="plotPredictedData.html" class="code" title="function [FigureNames] = plotPredictedData(data, model, estimation, misc, varargin)">plotPredictedData</a>(data, model, estimation, misc, <span class="keyword">...</span>
0230     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0231     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0232     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0233     <span class="string">'isExportTEX'</span>, isExportTEX);
0234 
0235 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0236 
0237 <span class="comment">%% Plot hidden state estimations</span>
0238 [FigureNames] = <a href="plotHiddenStates.html" class="code" title="function [FigureNames] = plotHiddenStates(data, model, estimation, misc, varargin)">plotHiddenStates</a>(data, model, estimation, misc, <span class="keyword">...</span>
0239     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0240     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0241     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0242     <span class="string">'isExportTEX'</span>, isExportTEX);
0243 
0244 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0245 
0246 <span class="comment">%% Plot model probability</span>
0247 [FigureNames] = <a href="plotModelProbability.html" class="code" title="function [FigureNames] = plotModelProbability(data, model, estimation, misc, varargin)">plotModelProbability</a>(data, model, estimation, misc, <span class="keyword">...</span>
0248     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0249     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0250     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0251     <span class="string">'isExportTEX'</span>, isExportTEX);
0252 
0253 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0254 
0255 <span class="comment">%% Plot dynamic regression</span>
0256 [FigureNames] = <a href="plotDynamicRegression.html" class="code" title="function [FigureNames] = plotDynamicRegression(data, model, estimation, misc, varargin)">plotDynamicRegression</a>(data, model, estimation, misc, <span class="keyword">...</span>
0257     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0258     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0259     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0260     <span class="string">'isExportTEX'</span>, isExportTEX);
0261 
0262 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0263 
0264 <span class="comment">%% Plot kernel regression results</span>
0265 [FigureNames] = <a href="plotStaticKernelRegression.html" class="code" title="function [FigureNames] = plotStaticKernelRegression(data, model, estimation, misc, varargin)">plotStaticKernelRegression</a>(data, model, estimation, misc, <span class="keyword">...</span>
0266     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0267     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0268     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0269     <span class="string">'isExportTEX'</span>, isExportTEX);
0270 
0271 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0272 
0273 <span class="comment">%% Waterfall plot for kernel regression</span>
0274 [FigureNames] = <a href="plotWaterfallSKDKRegression.html" class="code" title="function [FigureNames] = plotWaterfallSKDKRegression(data, model, estimation, misc, varargin)">plotWaterfallSKDKRegression</a>(data, model, estimation, misc, <span class="keyword">...</span>
0275     <span class="string">'FilePath'</span>, fullname, <span class="keyword">...</span>
0276     <span class="string">'isExportPDF'</span>, isExportPDF, <span class="keyword">...</span>
0277     <span class="string">'isExportPNG'</span>, isExportPNG, <span class="keyword">...</span>
0278     <span class="string">'isExportTEX'</span>, isExportTEX);
0279 
0280 FigureNames_full = [FigureNames_full  FigureNames]; <span class="comment">% record figure names</span>
0281 
0282 
0283 <span class="comment">%% Concatenate all pdfs in a single pdf file</span>
0284 <span class="keyword">if</span> isExportPDF
0285     
0286     <span class="comment">% Remove empty cells</span>
0287     FigureNames_full(cellfun(<span class="string">'isempty'</span>,FigureNames_full)) = [];
0288     
0289     <span class="comment">% Get number of time series</span>
0290     numberOfTimeSeries = length(data.labels);
0291     
0292     <span class="keyword">for</span> i=1:numberOfTimeSeries
0293         
0294         <span class="keyword">if</span> i == 1
0295             FigureNames_sort = {};
0296         <span class="keyword">end</span>
0297         
0298         pattern = data.labels{i};
0299         
0300         Test = strfind(FigureNames_full(:), pattern);
0301         Index = find(not(cellfun(<span class="string">'isempty'</span>, Test )));
0302         
0303         FigureNames_sub =  <span class="keyword">...</span>
0304             FigureNames_full(Index);
0305         
0306         FigureNames_sort = [ FigureNames_sort FigureNames_sub];
0307         
0308     <span class="keyword">end</span>
0309     
0310     <span class="keyword">if</span> model.nb_class&gt;1
0311         Test = strfind(FigureNames_full(:), <span class="string">'ModelProbability'</span>);
0312         Index = find(not(cellfun(<span class="string">'isempty'</span>, Test )));
0313         FigureNames_sub =  <span class="keyword">...</span>
0314             FigureNames_full(Index);
0315         
0316         FigureNames_sort = [FigureNames_sort FigureNames_sub];
0317     <span class="keyword">end</span>
0318     
0319     
0320     
0321     
0322     pdfFileName = [<span class="string">'ESTIMATIONS_'</span>, misc.ProjectName,<span class="string">'.pdf'</span>];
0323     fullPdfFileName = fullfile (fullname, pdfFileName);
0324     
0325     [isFileExist] = <a href="../../../BDLM_DATA_LOADER_9/functions/Others/testFileExistence.html" class="code" title="function [isFileExist]=testFileExistence(FileName, FileType)">testFileExistence</a>(fullPdfFileName, <span class="string">'file'</span>);
0326     
0327     <span class="keyword">if</span> isFileExist
0328         delete(fullPdfFileName)
0329     <span class="keyword">end</span>
0330     
0331     FigureNames_sort = strcat(fullfile(fullname, FigureNames_sort),<span class="string">'.pdf'</span>);
0332     
0333     
0334     <span class="comment">% Merge all pdfs for creating one single one in specified location</span>
0335     append_pdfs(fullPdfFileName, FigureNames_sort{:})
0336     
0337     
0338     open(fullPdfFileName)
0339     
0340 <span class="keyword">end</span>
0341 <span class="keyword">if</span> isExportPNG || isExportPDF || isExportTEX
0342     fprintf(<span class="string">'Figures saved in %s.'</span>, fullname)
0343     disp(<span class="string">' '</span>)
0344 <span class="keyword">end</span>
0345 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 18-Jun-2018 12:19:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>